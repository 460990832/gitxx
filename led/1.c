#include <reg52.h>
sbit T_STR = P2^6;       //锁存引脚，屏上标识位STR
sbit R1    = P1^0;       //数据引脚，屏上标识R1
sbit G1    = P2^4;       //数据引脚，屏上标识G1
sbit T_CLK = P2^5;       //时钟引脚，屏上标识位CLK
sbit OE    = P2^1;       //使能引脚，屏上标识EN/OE
//unsigned char song[][32]=
//{
//0x09,0x00,0xFD,0x08,0x09,0x08,0x09,0x10,0x09,0x20,0x79,0x40,0x41,0x04,0x47,0xFE,0x41,0x40,0x79,0x40,0x09,0x20,0x09,0x20,0x09,0x10,0x09,0x4E,0x51,0x84,0x21,0x00,
//0x00,0x40,0x40,0x40,0x20,0x40,0x20,0x44,0x07,0xFE,0x14,0x44,0x14,0x44,0x14,0x44,0x24,0x44,0xE7,0xFC,0x24,0x44,0x20,0x40,0x20,0x40,0x20,0x40,0x20,0x40,0x20,0x40,
//0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x0C,0x00,0x1E,0x00,0x1E,0x00,0x0C,0x00,0x04,0x00,0x08,0x00,0x10,0x00,0x00,0x00,
//0x00,0x10,0x1F,0xF8,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x1F,0xF0,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x1F,0xF0,0x10,0x10,0x00,0x00,
//0x11,0x00,0x11,0x00,0x11,0x00,0x23,0xFC,0x22,0x04,0x64,0x08,0xA8,0x40,0x20,0x40,0x21,0x50,0x21,0x48,0x22,0x4C,0x24,0x44,0x20,0x40,0x20,0x40,0x21,0x40,0x20,0x80,
//0x01,0x00,0x01,0x00,0x01,0x00,0x01,0x00,0x01,0x04,0xFF,0xFE,0x01,0x00,0x02,0x80,0x02,0x80,0x02,0x40,0x04,0x40,0x04,0x20,0x08,0x10,0x10,0x0E,0x60,0x04,0x00,0x00,
//0x04,0x40,0x08,0x20,0x14,0x50,0x02,0x80,0x01,0x00,0x06,0xC0,0x18,0x30,0xE0,0x0E,0x1F,0xF0,0x02,0x10,0x02,0x10,0x02,0x10,0x02,0x50,0x02,0x20,0x02,0x00,0x02,0x00
//};

void InputByte(unsigned  char DataR1) //写一个字节
{ 
	unsigned  char i;
	for(i=8; i>0; i--)
	{
		R1 = !(DataR1&0x01);                   
		T_CLK = 0;
		T_CLK = 1;
		DataR1 = DataR1 >> 1; 
	} 
}
void delay(unsigned int ms)
{
	int i,j;
	for(i=115;i>0;i--)
		for(j=ms;j>0;j--);
}
void main()
{
	unsigned long int count=0;
	int i=15;
	int j=0;
	unsigned char num=0;
	while(1)
	{
		T_STR=0;
		InputByte(4);
		InputByte(0x00);
		OE=1;
		T_STR=1;
		P0=i;
		OE=0;
		i--;
//		j=j+2;
//		count++;
//		if(count==3000)
//		{
//			count=0;
//			num++;
//		}	
		if(i==-1)
			i=15;
		delay(1000);
//		if(j==32)
//			j=0;
//		if(num==7)
//			num=0;
	}
}
